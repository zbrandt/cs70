\begin{homeworkProblem}{Pairing Up}

    Prove that for every even $n \geq 2$, there exists an instance of the stable matching problem with $n$ jobs and $n$ candidates such that the instance has at least $2^{n/2}$ distinct stable matchings.
    \\ \\
    (\textit{Hint}: It can help to start with some small examples; find an instance for $n=2$, and think about how you can use these preference lists to construct an instance for $n=4$. After this, you should be in a good position to generalize the construction for all even $n$.) 
    \\ \\
    \solution
    
    To prove that for all even $n \geq 2$ an instance exists of the stable matching problem with $n$ jobs and $n$ candidates such that the instance has at least $2^{n/2}$ distinct stable matching, I'll use the principle of induction to prove the \textit{base case} and the \textit{inductive step}.
    
    \begin{itemize}
        \item \textit{Base Case}: When $n = 2$, the claim holds since there is an instance where there are $2^{2/2}=2^1=2$ stable matchings.

        \begin{table}[h!]
            \centering
            \renewcommand{\arraystretch}{1.3} % Adjust row height
            \setlength{\tabcolsep}{10pt} % Adjust cell padding
    
            \begin{tabular}{cc}
                \begin{tabular}{|c|c|}
                \hline
                \textbf{Jobs} & \textbf{Candidates} \\ \hline
                $J_1$ & $C_1 > C_2$ \\ \hline
                $J_2$ & $C_2 > C_1$ \\ \hline
                \end{tabular}
                &
                \begin{tabular}{|c|c|}
                \hline
                \textbf{Candidates} & \textbf{Jobs} \\ \hline
                $C_1$ & $J_2 > J_1$ \\ \hline
                $C_2$ & $J_1 > J_2$ \\ \hline
                \end{tabular}
            \end{tabular}
        \end{table}

        For the above preference lists there are two stable matchings: $\{(C_1, J_1), (C_2, J_2) \}$ and $\{(C_1, J_2), (C_2, J_1) \}$

        \item \textit{Inductive Hypothesis}: Assume that for some even $n=k$ there exists an instance of the stable matching problem with $n$ jobs and $n$ candidates such that the instance has at least $2^{k/2}$ distinct stable matchings. 

        \item \textit{Inductive Step}: For $n=k+2$, we can show that there now exists preference lists for jobs and candidates of the following form

        \begin{table}[h!]
        \centering
        \renewcommand{\arraystretch}{1.3} % Adjust row height
        \setlength{\tabcolsep}{10pt} % Adjust cell padding

        \begin{tabular}{cc}
            \begin{tabular}{|c|c|}
            \hline
            \textbf{Jobs} & \textbf{Candidates} \\ \hline
            $J_1$ & $C_1 > C_2 > \dots$ \\ \hline
            $J_2$ & $C_1 > C_2 > \dots$ \\ \hline
            $\vdots$ & $\vdots$ \\ \hline
            $J_{k-1}$ & $C_k > C_{k-1} > \dots$ \\ \hline
            $J_{k}$ & $C_{k-1} > C_k > \dots$ \\ \hline
            \end{tabular}
            &
            \begin{tabular}{|c|c|}
            \hline
            \textbf{Candidates} & \textbf{Jobs} \\ \hline
            $C_1$ & $J_1 > J_2 > \dots$ \\ \hline
            $C_2$ & $J_1 > J_2 > \dots$ \\ \hline
            $\vdots$ & $\vdots$ \\ \hline
            $C_{k-1}$ & $J_{k} > J_{k-1} > \dots$ \\ \hline
            $C_{k+1}$ & $J_{k-1} > J_{k} > \dots$ \\ \hline
            \end{tabular}
        \end{tabular}
        \end{table}

        where the orderings following the `$\dots$'s are irrelevant for showing that there are at least $2^{(k+2)/2}$ distinct stable matchings now. With the addition of jobs $J_{k-1}$ and $J_k$ as well as candidates $C_{k-1}$ and $C_k$ it is possible to construct at least 2 times the number of stable matchings for $n=k$. This is because, for any previous stable matching under $n=k$, it is now possible to append either $(J_k-1, C_k), (J_k, C_{k-1})$ or $(J_k, C_{k-1}), (J_{k-1}, C_k)$ to the matching. No rogue pair can be formed in any matchings with either of these pairings as $C_k$ and $C_{k-1}$ are either $J_k$ or $J_{k-1}$'s first or second choice candidate, and vice versa. This is what makes the preference list orderings thereafter irrelevant. Doubling the amount of stable matchings from $n=k$ produces $2 \cdot 2^{k/2} = 2^{(k/2)+1}=2^{(k/2) + (2/2)} = 2^{(k+2)/2}$ stable matchings for $n=k+2$. By induction, we have shown that for every even $n \geq 2$ there exists an instance with at least $2^{n/2}$ distinct stable matches. 
        
    \end{itemize}

    % For every even $n \geq 2$, the instance of the stable matching problem wth $n$ jobs and $n$ candidates such that the instance has at least $2^{n/2}$ distinct stable matchings is one where every possible pairing is stable. To construct these instances, the preference lists must be unique for each job and mirrored by each candidate, or vice versa. That is, a job that has a particular candidate ranked as it's $i$th choice must be ranked as that candidates $(n+1-i)$th choice. 
    % \\ \\
    
    % For example, the preference lists to construct an instance for $n=4$ is

    % \begin{table}[h!]
    %     \centering
    %     \renewcommand{\arraystretch}{1.3} % Adjust row height
    %     \setlength{\tabcolsep}{10pt} % Adjust cell padding

    %     \begin{tabular}{cc}
    %         \begin{tabular}{|c|c|}
    %         \hline
    %         \textbf{Jobs} & \textbf{Candidates} \\ \hline
    %         $J_1$ & $C_1 > C_2 > C_3 > C_4$ \\ \hline
    %         $J_2$ & $C_2 > C_3 > C_4 > C_1$ \\ \hline
    %         $J_3$ & $C_3 > C_4 > C_1 > C_2$ \\ \hline
    %         $J_4$ & $C_4 > C_1 > C_2 > C_3$ \\ \hline
    %         \end{tabular}
    %         &
    %         \begin{tabular}{|c|c|}
    %         \hline
    %         \textbf{Candidates} & \textbf{Jobs} \\ \hline
    %         $C_1$ & $J_2 > J_3 > J_4 > J_1$ \\ \hline
    %         $C_2$ & $J_3 > J_4 > J_1 > J_2$ \\ \hline
    %         $C_3$ & $J_4 > J_1 > J_2 > J_3$ \\ \hline
    %         $C_4$ & $J_1 > J_2 > J_3 > J_4$ \\ \hline
    %         \end{tabular}
    %     \end{tabular}
    % \end{table}

    % Every possible matching is stable in this instance because, for any potentially rogue job or candidate, their preferred candidate or job will necessarily prefer their current partner over them. Job $i$'s first choice, second choice, third choice candidates have them as their last choice, second-to-last choice, and third-to-last choice job, respectively and so forth.
    % \\ \\
    % It is possible to construct such an instance of the stable matching problem with $n$ jobs and $n$ candidates for every even $n \geq 2$.
    
    
    
\end{homeworkProblem}